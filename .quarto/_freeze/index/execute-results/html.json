{
  "hash": "f409d3b629bd8d9b70899aa3232a013c",
  "result": {
    "markdown": "---\ntitle: \"**<b style = 'color : #E18B2A;'>Taller de Investigación: Política Cuantitativa “CUANTIPOL” - UNMSM</b>**\"\nauthor:  Joel Belsasar\nsubtitle: Introducción `ggplot2`\ndate: 4/06/2023\ntoc: true\nformat:\n  revealjs:\n    mainfont: Georgia\n    smaller: true\n    standalone: true\n    progress: true\n    theme: night\n    footer: <[Cuantipol](https://taller-unmsm-cuantipol-2023.github.io/ggplot2-INTRO/)>\nhighlight-style: a11y\n---\n\n\n## Herramientas para la ciencia de datos\n\n\n::: {.cell}\n::: {.cell-output-display}\n![[Whole game: Visualización](https://r4ds.hadley.nz/whole-game#fig-ds-whole-game)\n](./diagrams/whole-game.png){#fig-ds-whole-game fig-alt='A diagram displaying the data science cycle: Import -> Tidy ->\nUnderstand  (which has the phases Transform -> Visualize -> Model in a\ncycle) -> Communicate. Surrounding all of these is Program\nImport, Tidy, Transform, and Visualize is highlighted.' width=535}\n:::\n:::\n\n\n## Visualizar... datos\n\nUna visualización de datos efectiva brinda a los usuarios medios intuitivos para...\n\n- explorar y analizar datos de manera interactiva, permitiéndoles\n\n- identificar de manera efectiva patrones interesantes,\n\n- inferir correlaciones y causalidades, y\n\n- brindar soporte a actividades de comprensión.\n\nPero...\n\n- No solo implica aprender a crear un gráfico con una presentación adecuada, sino también comprender cómo abordar los *inputs* necesarios para lo que se necesite comunicar y, así, determinar la forma más efectiva de expresarlo.\n\n## Entonces, ¿por qué usar R?\n\n**Reproducibilidad**\n\n- Puedes anotar el scrpit, agregar información extra como títulos, etiquetas y leyendas, y mantener el código de todas las versiones de tus gráficos para saber siempre cómo se crearon.\n\n**Flujo de trabajo unificado**\n\n- R nos permite llevar a cabo muchas tareas sin necesidad de utilizar otros programas.\n\n- Funciones poderosas\n\n  - Se pueden utilizar múltiples paquetes y funciones para lograr una excelente visualización como `base R`, `plotly`, `sjPlot`, `mapview`, `igraph` y en particular nos vamos a enfocar en `ggplot2`.\n\n## `ggplot()`\n\n- La lógica que propone ggplot una de los paquetes de la familia tidyverse() es la estratificación\n\n- Si existe un consenso en R, es que ggplot es la librería para graficar.\n\n- En ggplot una capa se encarga de renderizar cada uno de los elementos visuales. Las capas forman una gramática o un conjunto de reglas mediante las cuales R creará los artefactos visuales. \n\n## La gramática en capas de gráficos de [Wickham (2009)](https://vita.had.co.nz/papers/layered-grammar.pdf)\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Adaptado en [Introduction to data visualisation](https://github.com/QCBSRworkshops/workshop03)\n](./diagrams/gglayers.png){#fig-ds-gglayer fig-alt='A diagram displaying the data science cycle' width=683}\n:::\n:::\n\n\n## Las capas básicas\n\n**1. La data:**\n\n- Los datos que queremos representar en la grafica deben estar ordenados, es decir, cada fila debe representar una observación y cada columna debe representar una variable. \n\n**2. El mapeo estético:**\n\n- La segunda capa mapea las variables *`X`* y *`Y`* usando la funcion `aes`. Además, puede utilzar otros argumentos como el `color` y vincularlo a una columna diferente del conjunto de datos.  \n  \n```markdown\nggplot(dataframe) + \ngeom_(mapping = aes(x, y), ...) + ...\n```\n\n## Dataset: `WorldBank`\n\n- Utilicemos los datos económicos y sociales de diferentes países proporcionados por el Banco Mundial.\n\n- Preprocesamiento de los datos:\n\n::: {.cell}\n\n:::\n\n\n## Capa: data\n\n```markdown\nggplot(data = dataf)\n```\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-4-1.png){width=960}\n:::\n:::\n\n\n## Capa: Aesthetics\n\n```markdown\nggplot(data = dataf, \n       mapping = aes(x = Mortalidad_Infantil, \n           y = PIB_Per_Capita)) \n```\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-5-1.png){width=576}\n:::\n:::\n\n\n## Capa: Geométrica `geom_`\n\n```markdown\nggplot(data = dataf, \n       mapping = aes(x = Mortalidad_Infantil, \n           y = PIB_Per_Capita))  + # Para añadir la siguiente capa debemos utilizar el signo más (`+`)\n  geom_point()\n  \n```\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-6-1.png){width=576}\n:::\n:::\n\n\n## Capas: Coordinates, and themes\n\n```markdown\nggplot(data = dataf, \n       mapping = aes(x = Mortalidad_Infantil, y = PIB_Per_Capita)) + \n       geom_point() + \n       coord_trans(x = \"log10\", y = \"log10\") + \n       theme_classic()\n```\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-7-1.png){width=576}\n:::\n:::\n\n\n## En suma, en un solo fragmento de código:\n\n```markdown\n# Crear la gráfica utilizando ggplot2\nggplot(dataf,                         # Data\n       aes(x = Mortalidad_Infantil,   # Your X-value\n           y = PIB_Per_Capita,        # Your Y-value\n           color = \"\")                # Podemos pintar con otra variable\n       ) +                            # Aesthetics\n  geom_point(size = 5, alpha = 0.8) + # Point\n  geom_smooth(method = \"lm\") +        # Linear regression\n  labs(title = \"Relación entre Tasa de Mortalidad Infantil y PIB per cápita\", # Title\n       x = \"Tasa de Mortalidad Infantil\", y = \"PIB per cápita\", col = \"\") +\n  theme_classic() + # apply a clean theme\n  theme(title = element_text(size = 18, face = \"bold\"),\n      text = element_text(size = 16))\n```\n\n## En suma, en un solo fragmento de código:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-8-1.png){width=864}\n:::\n:::\n\n\n## Bibliografía:\n\nWickham, H., Navarro, D., & Lin, T. (2009). *ggplot2. Elegant Graphics for Data Analysis * (3ª ed.). Springer. [https://ggplot2-book.org/](https://ggplot2-book.org/)\n\nWickham, H. (2010). *A Layered Grammar of Graphics*. Journal of Computational and Graphical Statistics, vol. 19, no. 1, pp. 3–28. [https://vita.had.co.nz/papers/layered-grammar.pdf](https://vita.had.co.nz/papers/layered-grammar.pdf)\n\nWickham, H., Çetinkaya-Rundel, M., & Grolemund, G. (2023). *R for Data Science. Import, Tidy, Transform, Visualize, and Model Data* (2ª ed.). O'Reilly Media, Inc. [https://r4ds.hadley.nz/](https://r4ds.hadley.nz/)\n\nIkakis, N. (2018). Big data visualization tools.\" arXiv preprint. [arXiv:1801.08336](https://arxiv.org/abs/1801.08336)\n\n\n## Más recursos:\n\n- [Revealjs](https://quarto.org/docs/presentations/revealjs/)\n\n- [Advanced Reveal](https://quarto.org/docs/presentations/revealjs/advanced.html)\n\n- [Revealjs Options](https://quarto.org/docs/reference/formats/presentations/revealjs.html)\n\n- [Revealjs Plugins](https://quarto.org/docs/extensions/revealjs.html)",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    // dispatch for htmlwidgets\r\n    function fireSlideEnter() {\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n    }\r\n\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n      fireSlideEnter();\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}